import React, { useState } from 'react';
import { Navbar, Nav } from 'react-bootstrap';
import { Link, useLocation } from 'react-router-dom';
import '../Styles/Header.css';
import toast from 'react-hot-toast';

const Header = ({ reloadnavbar }) => {
  const location = useLocation(); // Using useLocation hook to access the location object
  const success = location.state && location.state.success;

  const handleLogout = () => {
    // Clear user data from localStorage
    localStorage.removeItem('user');
    
    // Navigate to the home page
    window.location.href = "/fpage";
    
    // Show logout success message
    toast.success('Logged out successfully');
  };
  return (
    <header className='blwhead' style={{ boxShadow:'0px 0px 6px' }}>
      <Navbar  expand="lg"  >
        <Navbar.Brand>
          <Link to="/" className="apt-title" style={{ textDecoration: 'none' }}>
            <img
              src="Logo.svg" //logo for the apt
              alt="Logo"
              className='imggg'
              style={{ height: '40px', marginTop: '-4px' }}
            />
            APT
          </Link>
        </Navbar.Brand>
        <Navbar.Toggle aria-controls="basic-navbar-nav" />
        <Navbar.Collapse id="basic-navbar-nav">
          <Nav className="mll">
            {success ? (
              <div style={{ display:'flex',flexDirection:'row'}}>
              <div style={{marginRight:'15px'}}>
                <Link to="/" className="dropdown-item" onClick={handleLogout}>
                  Log out
                </Link>
              </div>
              <div>
                <Link to="/profile" className="dropdown-item" >
                  Profile
                </Link>
              </div>
              </div>
              
            ) : (
              <div style={{ display: 'flex', flexDirection: 'row' }}>
                <Link to="/login" className="dropdown-item" style={{ marginRight: '15px' }}>
                  Sign-in
                </Link>
                <Link to="/register" className="dropdown-item">
                  Sign-up
                </Link>
              </div>
            )}
          </Nav>
        </Navbar.Collapse>
      </Navbar>
    </header>
  );
};

export default Header;
